<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">You Do not Need a Framework | Pine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gopine.dev/img/pine-logo-text.png"><meta data-rh="true" name="twitter:image" content="https://gopine.dev/img/pine-logo-text.png"><meta data-rh="true" property="og:url" content="https://gopine.dev/blog/you-dont-need-a-framework"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="You Do not Need a Framework | Pine"><meta data-rh="true" name="description" content="This probably sounds insane having spent time building Pine, however, I have to say that you may not need a framework to build a server in Go. In this blog I will outline why I built Pine and what I have learnt from it."><meta data-rh="true" property="og:description" content="This probably sounds insane having spent time building Pine, however, I have to say that you may not need a framework to build a server in Go. In this blog I will outline why I built Pine and what I have learnt from it."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-10-21T20:01:04.000Z"><meta data-rh="true" property="article:author" content="https://github.com/BryanMwangi"><meta data-rh="true" property="article:tag" content="Pine,Hello World,New"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gopine.dev/blog/you-dont-need-a-framework"><link data-rh="true" rel="alternate" href="https://gopine.dev/blog/you-dont-need-a-framework" hreflang="en"><link data-rh="true" rel="alternate" href="https://gopine.dev/blog/you-dont-need-a-framework" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://gopine.dev/blog/you-dont-need-a-framework","mainEntityOfPage":"https://gopine.dev/blog/you-dont-need-a-framework","url":"https://gopine.dev/blog/you-dont-need-a-framework","headline":"You Do not Need a Framework","name":"You Do not Need a Framework","description":"This probably sounds insane having spent time building Pine, however, I have to say that you may not need a framework to build a server in Go. In this blog I will outline why I built Pine and what I have learnt from it.","datePublished":"2024-10-21T20:01:04.000Z","author":{"@type":"Person","name":"Bryan Mwangi","description":"Full Stack Developer Golang + JS","url":"https://github.com/BryanMwangi","image":"https://github.com/BryanMwangi.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://gopine.dev/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pine RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pine Atom Feed"><link rel="stylesheet" href="/assets/css/styles.3f2bf089.css">
<script src="/assets/js/runtime~main.b3ea79ba.js" defer="defer"></script>
<script src="/assets/js/main.d611bca0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Pine logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Pine logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pine</b></a><a class="navbar__item navbar__link" href="/docs/intro">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/BryanMwangi/pine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/you-dont-need-a-framework">You Do not Need a Framework</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">You Do not Need a Framework</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-10-21T20:01:04.000Z">October 21, 2024</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/bryanmwangi"><img class="avatar__photo authorImage_XqGP" src="https://github.com/BryanMwangi.png" alt="Bryan Mwangi"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/bryanmwangi"><span class="authorName_yefp">Bryan Mwangi</span></a></div><small class="authorTitle_nd0D" title="Full Stack Developer Golang + JS">Full Stack Developer Golang + JS</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/bryan-gichuru-b6b200128/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" class="authorSocialLink_owbf"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453" fill="#0A66C2"></path></svg></a><a href="https://github.com/BryanMwangi" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>This probably sounds insane having spent time building Pine, however, I have to say that you may not need a framework to build a server in Go. In this blog I will outline why I built Pine and what I have learnt from it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-pine">Why Pine?<a href="#why-pine" class="hash-link" aria-label="Direct link to Why Pine?" title="Direct link to Why Pine?">​</a></h2>
<p>About 2 months ago, I and a group of other people were tasked with a small project to build a food ordering system. The challenge was to not use any framework on the backend and utilize the standard library as much as possible.</p>
<p>This got me thinking. Is it possible to achieve the same level of performance and efficiency as working with frameworks such as Fiber, Echo or Gin? What is it that makes them boast insane numbers when it comes to performance?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enter-pine">Enter Pine<a href="#enter-pine" class="hash-link" aria-label="Direct link to Enter Pine" title="Direct link to Enter Pine">​</a></h2>
<p>Well Pine was born with those exact questions in mind. Build a <a href="https://pkg.go.dev/net/http" target="_blank" rel="noopener noreferrer">net/http</a> server in Go and not use any framework but have the same level of performance and efficiency.</p>
<p>I have used Fiber in the past and I loved it especially when I was transitioning from node to Go. On node, I would use the <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">express</a> npm package to build servers on node JS and I was a bit lazy and wanted anything that would offer the same experience as I was learning Go.</p>
<p>Fiber is a breeze to use and before you say anything, yes, Pine has some similarities with Fiber. This is particularly noticeable in some of the configurations used by the main Server instance as one reddit comment pointed out.</p>
<p>The similarities end at the configurations of the main Server struct and maybe the Helmet package.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clarification">Clarification<a href="#clarification" class="hash-link" aria-label="Direct link to Clarification" title="Direct link to Clarification">​</a></h2>
<p>When I made this <a href="https://www.reddit.com/r/golang/comments/1g2h7yp/pine_a_simple_express_js_or_fiber_golang/" target="_blank" rel="noopener noreferrer">post</a> a couple of weeks ago, 2 people wanted to claim that Pine was a balant copy of Fiber with the underlying workings of <a href="https://github.com/valyala/fasthttp" target="_blank" rel="noopener noreferrer">fasthttp</a> changed to <a href="https://pkg.go.dev/net/http" target="_blank" rel="noopener noreferrer">net/http</a>.</p>
<p>Here is the thing. Naming is hard in programming and the same can be seen here. Just because you have similar naming schemes does not mean whatever is performing the logic is the same.</p>
<p>I would like to encourage you to carefully read the underlying code to understand how it works before making certain accusations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="let-us-continue">Let us continue<a href="#let-us-continue" class="hash-link" aria-label="Direct link to Let us continue" title="Direct link to Let us continue">​</a></h2>
<p>With that out of the way, let us look into the challenges of making your own framework.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="routing">Routing<a href="#routing" class="hash-link" aria-label="Direct link to Routing" title="Direct link to Routing">​</a></h3>
<p>After trying to understand how open source routers work as well as other frameworks&#x27; routing system, I was able to come up with my own solution to solve routing.</p>
<p>The challenge of performance boils down to how fast you can route a request to its respective handlers, process the request and send back a response to the client. Whenever you as a developer are using Pine to create a router, you would use some of the inbuilt methods related to the server instance you create after calling the <code>New</code> function. One example is the <code>Get</code> method:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">server </span><span class="token operator">*</span><span class="token plain">Server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> handlers </span><span class="token operator">...</span><span class="token plain">Handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can then use this method to create a route such as <code>GET /hello</code> and pass the handlers that you want to execute when the request is made.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/hello&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c </span><span class="token operator">*</span><span class="token plain">pine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">SendString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After creating the route, internally Pine, creates a stack of routes that it uses to efficiently match a request to its respective handlers.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">stack </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">*</span><span class="token plain">Route</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We index the routes on server startup and whenever a request is made, we extract things like parameters when generating a Ctx related to the request. More on the <a href="/docs/Guide - Basics/ctx">Ctx here</a>.</p>
<p>Now, you do not even need to implement routing yourself as you can use other packages including ones built into the standard library for this. Examples include:</p>
<ul>
<li><a href="https://github.com/julienschmidt/httprouter" target="_blank" rel="noopener noreferrer">httprouter</a></li>
<li><a href="https://github.com/go-chi/chi" target="_blank" rel="noopener noreferrer">chi</a></li>
<li><a href="https://github.com/gorilla/mux" target="_blank" rel="noopener noreferrer">gorilla/mux</a></li>
<li><a href="https://pkg.go.dev/net/http@master#ServeMux" target="_blank" rel="noopener noreferrer">net/http.ServeMux</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-challenges">Other Challenges<a href="#other-challenges" class="hash-link" aria-label="Direct link to Other Challenges" title="Direct link to Other Challenges">​</a></h2>
<p>With an efficient routing system in place, most of the remaining challenges are purely for the sake of a better developer experience.</p>
<p>Most frameworks use the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="noopener noreferrer">DRY</a> principle to reduce the amount of code you need to write. Using this philosophy, you tend to write code that allows you to focus on the core functionality of your server without having to repeat yourself.</p>
<p>For example, instead of re-writing code to handle writing a json response over and over again, you can build your own solution that accepts data as an interface and encodes to json and writes the response to the response body.</p>
<p>These abstractions are what make frameworks so powerful and allow you to focus on the core functionality of your server. Not that they are miles ahead or have some secret sauce that makes them stand out, and you can build these solutions yourself.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nice-to-have">Nice to have<a href="#nice-to-have" class="hash-link" aria-label="Direct link to Nice to have" title="Direct link to Nice to have">​</a></h2>
<p>Pine offers some neat features out of the box that you can easily implement yourself or use Pine&#x27;s implementation of them.</p>
<p>One such feature is the <a href="/docs/Guide - Basics/cron">cron</a> package. During my exercise with my colleagues, we had to have a feature that would update a database at a specific interval. I then thought to myself that we could have cron jobs that can do such tasks during the server&#x27;s runtime.</p>
<p>Another neat feature is the <a href="/docs/Guide - Basics/websockets#watchfile">WatchFile</a> function implemented within the <a href="/docs/Guide - Basics/websockets">websockets</a> package. This feature came to me after utilizing <a href="https://fly.io" target="_blank" rel="noopener noreferrer">fly.io</a> services for some time now.</p>
<p>If you have used them before, you have the ability to monitor live logs. The only challenge is you have a small window in which you can see the logs in unless you dive deeper in the <code>search logs</code> feature. I then thought to myself, what if I wanted to see all my logs in my log file and in real time?</p>
<p>With <code>WatchFile</code>, you can do exactly that. You first need to open a websocket connection to allow streaming of the logs in real time and more on this in the <a href="/docs/Guide - Basics/websockets">websockets guide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mistakes">Mistakes<a href="#mistakes" class="hash-link" aria-label="Direct link to Mistakes" title="Direct link to Mistakes">​</a></h2>
<p>I am aware that there may be some mistakes in the implementation of Pine and that is why I encourage anyone to not just point out the mistakes but also to suggest improvements to the code. That is the only way we can all collectively improve ourselves.</p>
<p>This project started off as a learning exercise and as you can see from my benchmarks, Pine is able to compete with Fiber in synthetic tests.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarks">Benchmarks<a href="#benchmarks" class="hash-link" aria-label="Direct link to Benchmarks" title="Direct link to Benchmarks">​</a></h2>
<p>One comment from the post is that there was no way to perform a benchmark with Pine or at least I did not highlight how I was able test this. I used a tool called <a href="https://github.com/hatoo/oha" target="_blank" rel="noopener noreferrer">Oha</a> to test the performance of the server.</p>
<p>Setting up a benchmark is simple. First open any directory you wish to use and set up a new Go project. Next import the Pine package using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">go get github.com/BryanMwangi/pine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In your main.go start a simple server and pass the port you wish to listen to.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;log&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;github.com/BryanMwangi/pine&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Initialize a new Pine app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    app </span><span class="token operator">:=</span><span class="token plain"> pine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">New</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Define a route for the GET method on the path &#x27;/hello&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/hello&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c </span><span class="token operator">*</span><span class="token plain">pine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">SendString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello World!&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Start the server on port 3000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Fatal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;:3000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can change the routes to your choosing or try out different tests such as JSON encoding, middlewares etc.</p>
<p>Anyway, once your server is up and running after executing <code>go run main.go</code> you can run the benchmark using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">oha -n 1000000 -c 100 http://localhost:3000/hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>-c</code> flag is the number of concurrent connections and the <code>-n</code> flag is the number of requests per connection. In my tests, when I was testing Fiber, Express and Pine, I used 1,000,000 requests and 100 concurrent connections. You can change these values to your liking.</p>
<p>You can observe the results and make your own conclusions. Also use this opportunity to test your own solutions and see how they perform.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In my honest opinion, the real rockstars here are authors of the standard <a href="https://pkg.go.dev/net/http" target="_blank" rel="noopener noreferrer">net/http</a> package and the <a href="https://github.com/valyala/fasthttp" target="_blank" rel="noopener noreferrer">fasthttp</a> package since that is where most of the performance is gained from.</p>
<p>With the latest release of net/http, it was previously 10 times slower than fasthttp, however, they manage to match or sometimes beat the performance of fasthttp.</p>
<p>I am not saying that using frameworks is bad or one framework is better than another, heck, I am not even suggesting that you should use Pine, instead, I am challenging you to be a better developer and try building some of the solutions yourself.</p>
<p>I created Pine because I want to learn and teach others about the findings I have learnt and if you have any suggestions or improvements, please do not hesitate to open an issue or a pull request. I want to be a better developer myself and that means learning from my mistakes as well as others. I am in no means perfect, and do not take Pine as my gospel to the world, instead try to learn from it and improve yourself and others.</p>
<p>Please be aware that Pine is still very much in beta with improvements coming soon given that as a framework, I have some catching up to do. At this point other frameworks are a couple of years ahead having started some 5 or 6 years ago, but that does not mean I will abandon Pine. I am still learning every day as I implement some of the solutions myself, and I would be happy if anyone would like to contribute to the project.</p>
<p>If you wish to use Pine, please remember the limitations of the project and the fact that it is still in beta. If you like the project, please consider starring it on <a href="https://github.com/BryanMwangi/pine" target="_blank" rel="noopener noreferrer">GitHub</a> and sharing it with your friends and colleagues.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="Posts directly related to Pine" class="tag_zVej tagRegular_sFm0" href="/blog/tags/pine">Pine</a></li><li class="tag_QGVx"><a title="Hello World!" class="tag_zVej tagRegular_sFm0" href="/blog/tags/helloWorld">Hello World</a></li><li class="tag_QGVx"><a title="New feature or update" class="tag_zVej tagRegular_sFm0" href="/blog/tags/new">New</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/BryanMwangi/pine-docs/blob/main/blog/you_dont_need_a_framework.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-pine" class="table-of-contents__link toc-highlight">Why Pine?</a></li><li><a href="#enter-pine" class="table-of-contents__link toc-highlight">Enter Pine</a></li><li><a href="#clarification" class="table-of-contents__link toc-highlight">Clarification</a></li><li><a href="#let-us-continue" class="table-of-contents__link toc-highlight">Let us continue</a><ul><li><a href="#routing" class="table-of-contents__link toc-highlight">Routing</a></li></ul></li><li><a href="#other-challenges" class="table-of-contents__link toc-highlight">Other Challenges</a></li><li><a href="#nice-to-have" class="table-of-contents__link toc-highlight">Nice to have</a></li><li><a href="#mistakes" class="table-of-contents__link toc-highlight">Mistakes</a></li><li><a href="#benchmarks" class="table-of-contents__link toc-highlight">Benchmarks</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/guide---basics">Guide - Basics</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/guide---advanced">Guide - Advanced</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/NNWYpZ3U" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/pinegolang" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/BryanMwangi/pine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Pine. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>